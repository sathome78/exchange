<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:aop="http://www.springframework.org/schema/aop" xmlns:task="http://www.springframework.org/schema/task"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://www.springframework.org/schema/mvc
	http://www.springframework.org/schema/mvc/spring-mvc.xsd
	http://www.springframework.org/schema/aop
	http://www.springframework.org/schema/aop/spring-aop.xsd">

    <mvc:default-servlet-handler/>
    <aop:aspectj-autoproxy/>

    <bean class="web.aop.ControllerAspects">
        <property name="log2DAO" ref="log2DAO"/>
        <property name="jsonTransformer" ref="jsonTransformer"/>
        <property name="exceptionAdvisor" ref="exceptionAdvisor"/>
    </bean>

    <mvc:cors>
        <mvc:mapping path="/**"/>
    </mvc:cors>

    <import resource="classpath*:spring-service-config.xml"/>

    <bean id="authenticatedUserResolver" class="web.resolver.AuthenticatedUserResolver">
        <property name="sessionManager" ref="sessionManager"/>
        <property name="userService" ref="userService"/>
        <property name="userDAO" ref="userDAO"/>
    </bean>

    <bean id="partiallyAuthenticatedUserResolver" class="web.resolver.PartiallyVerifiedUserResolver">
        <property name="sessionManager" ref="sessionManager"/>
        <property name="userService" ref="userService"/>
        <property name="userDAO" ref="userDAO"/>
    </bean>

    <mvc:annotation-driven>
        <mvc:argument-resolvers>
            <ref bean="authenticatedUserResolver"/>
            <ref bean="partiallyAuthenticatedUserResolver"/>
        </mvc:argument-resolvers>
    </mvc:annotation-driven>

    <bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
        <property name="messageConverters">
            <list>
                <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"/>
                <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.FormHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.StringHttpMessageConverter"/>
            </list>
        </property>
    </bean>

    <bean class="web.controller.LoginController">
        <property name="authenticationService" ref="authenticationService"/>
    </bean>

    <bean class="web.controller.UserController">
        <property name="userService" ref="userService"/>
    </bean>

    <bean class="web.controller.PermissionController">
        <property name="companyAdminService" ref="companyAdminService"/>
        <property name="permissionService" ref="permissionService"/>
    </bean>

    <bean class="web.controller.PolicyController">
        <property name="userService" ref="userService"/>
        <property name="policyDAO" ref="policyDAO"/>
    </bean>

    <bean id="sessionManager" class="web.session.SessionManagerImpl">
        <property name="sessionDAO" ref="sessionDAO"/>
    </bean>

    <bean id="exceptionAdvisor" class="web.advisor.ExceptionAdvisor"/>

    <bean class="web.controller.ProvidersController">
        <property name="pokitDokService" ref="pokitdokService"/>
    </bean>

    <bean class="web.controller.EligibilityController">
        <property name="pokitDokService" ref="pokitdokService"/>
    </bean>

    <bean class="web.controller.ClaimController">
        <property name="pokitDokService" ref="pokitdokService"/>
    </bean>

    <bean class="web.controller.CompanyController">
        <property name="companyService" ref="companyService"/>
    </bean>

    <bean class="web.controller.ReportController">
        <property name="reportDAO" ref="reportDAO"/>
    </bean>

    <bean class="web.controller.TradingPartnerController">
        <property name="tradingPartnerService" ref="tradingService"/>
    </bean>

    <bean class="web.controller.TermsAndConditionsController">
        <property name="userService" ref="userService"/>
    </bean>

    <bean class="web.controller.HSAController">
        <property name="userService" ref="userService"/>
        <property name="planService" ref="planService"/>
        <property name="companyUserDAO" ref="companyUserDAO"/>
    </bean>

    <bean class="web.controller.PlaidController">
        <property name="plaidService" ref="plaidService"/>
    </bean>

    <bean class="web.controller.BillController">
        <property name="userBillService" ref="userBillService"/>
    </bean>

    <bean class="web.controller.PaysourceController">
        <property name="paysourceService" ref="stripeService"/>
    </bean>

    <bean class="web.controller.PaymentController">
        <property name="paymentService" ref="paymentService"/>
    </bean>

    <bean class="web.controller.AdminController">
        <property name="companyAdminService" ref="companyAdminService"/>
    </bean>

    <bean class="web.controller.UserMessageController">
        <property name="messageService" ref="messageService"/>
    </bean>

    <bean class="web.controller.JobTriggerController">
        <property name="paymentJob" ref="paymentJob"/>
        <property name="wexCDExScheduler" ref="wexCDExScheduler"/>
        <property name="wexConsumerService" ref="wexConsumerService"/>
    </bean>

    <!--
       Spring util classes
    -->

    <bean id="messageSource" class="org.springframework.context.support.StaticMessageSource"/>
    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/>


    <!--
      Mock beans
    -->

    <bean id="pokitDokApi" class="mock.MockPokitDokAPIImpl">
        <property name="log1DAO" ref="log1DAO"/>
        <property name="jsonTransformer" ref="jsonTransformer"/>
    </bean>


    <!--
    Claim parser dependencies
    -->

    <bean id="segmentSupport" class="com.medxoom.SegmentSupport"/>

    <bean id="messagingSupport" class="com.medxoom.MessagingSupport">
        <!--      <property name="userDAO" ref="userDAO"/> -->
        <property name="applicationEventDAO" ref="applicationEventDAO"/>
        <property name="messageService" ref="messageService"/>
    </bean>

    <bean id="fileGenerator835" class="com.medxoom.impl.gen835.Generator835">
        <!--  <property name="cfProducer" ref="cf837"/> -->

        <property name="claimBlobDAO" ref="claimBlobDAO"/>
        <property name="claimDAO" ref="claimDAO"/>
        <property name="claimDiagnosisDAO" ref="claimDiagnosisDAO"/>
        <property name="claimItemDAO" ref="claimItemDAO"/>
        <property name="claimItemAdjudicationDAO" ref="claimItemAdjudicationDAO"/>
        <property name="claimItemAdjustmentDAO" ref="claimItemAdjustmentDAO"/>
        <property name="claimItemAmountDAO" ref="claimItemAmountDAO"/>
        <property name="claimNameDAO" ref="claimNameDAO"/>
        <property name="claimNameContactInfoDAO" ref="claimNameContactInfoDAO"/>
        <property name="claimSubscriberDAO" ref="claimSubscriberDAO"/>
        <property name="userDAO" ref="userDAO"/>
        <property name="providerPayToDAO" ref="providerPayToDAO"/>

        <property name="segmentSupport" ref="segmentSupport"/>
    </bean>

    <bean id="cf835" class="com.medxoom.impl.p835.NetDue835CFProducer"/>

    <bean id="fileParser835" class="com.medxoom.impl.p835.NetDue835Parser">
        <property name="cfProducer" ref="cf837"/>

        <property name="claimBlobDAO" ref="claimBlobDAO"/>
        <property name="claimDAO" ref="claimDAO"/>
        <property name="claimDiagnosisDAO" ref="claimDiagnosisDAO"/>
        <property name="claimItemDAO" ref="claimItemDAO"/>
        <property name="claimItemAdjudicationDAO" ref="claimItemAdjudicationDAO"/>
        <property name="claimItemAdjustmentDAO" ref="claimItemAdjustmentDAO"/>
        <property name="claimItemAmountDAO" ref="claimItemAmountDAO"/>
        <property name="claimNameDAO" ref="claimNameDAO"/>
        <property name="claimNameContactInfoDAO" ref="claimNameContactInfoDAO"/>
        <property name="claimSubscriberDAO" ref="claimSubscriberDAO"/>
        <property name="userDAO" ref="userDAO"/>
        <property name="providerPayToDAO" ref="providerPayToDAO"/>

        <property name="segmentSupport" ref="segmentSupport"/>
        <property name="messagingSupport" ref="messagingSupport"/>
    </bean>

    <bean id="cf837" class="com.medxoom.impl.p837.NetDue837CFProducer"/>
    <bean id="fileParser837" class="com.medxoom.impl.p837.NetDue837Parser">
        <property name="cfProducer" ref="cf837"/>

        <property name="claimBlobDAO" ref="claimBlobDAO"/>
        <property name="claimDAO" ref="claimDAO"/>
        <property name="claimDiagnosisDAO" ref="claimDiagnosisDAO"/>
        <property name="claimItemDAO" ref="claimItemDAO"/>
        <property name="claimItemAdjudicationDAO" ref="claimItemAdjudicationDAO"/>
        <property name="claimItemAdjustmentDAO" ref="claimItemAdjustmentDAO"/>
        <property name="claimItemAmountDAO" ref="claimItemAmountDAO"/>
        <property name="claimNameDAO" ref="claimNameDAO"/>
        <property name="claimNameContactInfoDAO" ref="claimNameContactInfoDAO"/>
        <property name="claimSubscriberDAO" ref="claimSubscriberDAO"/>
        <property name="userDAO" ref="userDAO"/>
        <property name="providerPayToDAO" ref="providerPayToDAO"/>

        <property name="segmentSupport" ref="segmentSupport"/>
        <property name="messagingSupport" ref="messagingSupport"/>
    </bean>

    <bean id="fileCollector" class="com.medxoom.impl.FileCollectorImpl"/>

    <bean id="root" class="com.medxoom.ContextRoot">
        <property name="fileCollector" ref="fileCollector"/>
        <property name="fileGenerator835" ref="fileGenerator835"/>
        <property name="fileParser835" ref="fileParser835"/>
        <property name="fileParser837" ref="fileParser837"/>
    </bean>
</beans>
