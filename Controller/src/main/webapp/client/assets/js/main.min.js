jQuery(document).ready(function($) {


    $('[data-fancybox]').fancybox({

        baseTpl:
        '<div class="fancybox-container">' +
        '<div class="fancybox-bg"></div>' +
        '<div class="fancybox-inner">' +
        '<div class="fancybox-stage"></div>' +
        '</div>' +
        '</div>',

        btnTpl: {
            smallBtn:
                '<div data-fancybox-close class="popup__close"></div>',
        },
        animationEffect: 'zoom-in-out',
        animationDuration: 200,
    });


    $('.js-coverbox[data-fancybox]').fancybox({

        baseTpl:
        '<div class="fancybox-container">' +
        '<div class="fb-bg"></div>' +
        '<div class="fancybox-inner">' +
        '<div class="fancybox-stage"></div>' +
        '</div>' +
        '</div>',

        btnTpl: {
            smallBtn: '',
        },
        clickSlide: false,
        clickOutside: false,
        touch: false
    });







    $('.field__input').bind('checkval',function(){
        var labelActive = 'field__label--active';
        var inputActive = 'field__input--active';

        var label = $(this).siblings('.field__label');
        if (this.value !== ''){
            $(this).addClass(inputActive);
            label.addClass(labelActive);
        } else {
            $(this).removeClass(inputActive);
            label.removeClass(labelActive);
        }
    }).on('keyup',function(){
        $(this).trigger('checkval');
    });



    $('.js-show-pwd').on('click', function() {
        var pwd = $(this).siblings('.js-pwd');
        $(this).toggleClass('field__pwd-show--active');

        if ($(pwd).attr('type') == 'password') {
            $(pwd).attr('type', 'text');
        } else {
            $(pwd).attr('type', 'password');
        }
    });


    $('[type=submit]').on('click', function () {

        var $btn  = $(this);
        var $form = $btn.closest('form');

        $form.validate({
            ignore:'',
            errorClass: 'field__error',
            errorElement: 'div',
            highlight: function(element) {
                $(element).addClass('field__input--error').siblings('.field__label').addClass('field__label--error');
            },
            unhighlight: function(element) {
                $(element).removeClass('field__input--error').siblings('.field__label').removeClass('field__label--error');
            },
            rules: {
                email: {
                    required: true,
                    email: true,
                },
                password: {
                    required: true,
                },
            },
            // submitHandler: function (form) {
            //     $btn.removeClass('btn--error');
            // },
            // invalidHandler: function(form) {
            //     $btn.addClass('btn--error');
            // }
        });

    });

});